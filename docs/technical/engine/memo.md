## 構文解析
ソースコードを読み取り、AST(parse::Nodeによる木構造)を組み立てる。  
構造体のサイズを確定させるためにノードの中に別のノードを入れる場合はBoxやVecで囲んでいる。

## 静的解析
関数宣言や変数宣言を見て、識別子の解決に必要な情報や型情報(スコープ情報)を収集する。  
識別子を見て、スコープに存在する関数や変数への解決を行う。  
AST全体で、型の矛盾がないかどうかを確認する。  
識別子の解決を行い、グラフノードを生成する。

### if文
パーサーではできるだけ間違った並びでも読み取るようにして、静的解析でエラーを検出する。  
静的解析でelse if部分をelseのブロックの中にif文がネストしている形としてデシュガーする。

イメージ:
```ts
// before
if cond {

} else if cond {

} else if cond {

} else {

}

// after
if cond {

} else {
	if cond {

	} else {
		if cond {

		} else {

		}
	}
}
```

### 型チェック
TODO

### 解析スタック
識別子とグラフノードのペアを解析スタックに登録する。  
そのスコープに存在する全ての識別子と、対応するグラフノードの情報(型やソースコード上の位置など)にアクセスできる。  
解析スタックの構造はレイヤー状になっている。1つのレイヤーには複数のレコードを登録できる。  
現在のレイヤーから親のレイヤーには遡ってアクセスできる。子のレイヤーにはアクセスできない。

## インタプリタによる実行
静的解析で生成したグラフをトラバースして処理を実行する。  

## 実行スタック
実行スタックに変数などの値を追加していく。実行スタックの項目はシンボルと呼ぶ。  
グラフノードのIDをシンボルアドレスとして使う。

### 参照のグラフノードにおけるシンボル操作
参照のグラフノードを見つけた時は、参照先が参照ノードではなくなるまで参照先の解決を試みる。  
参照先が見つかったら、そのノードIDをシンボルアドレスとして、シンボルの操作を行う。
